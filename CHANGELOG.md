# 更新日志 (Changelog)

## [v1.5.0] - 2025-10-05

### 新增功能
- 改进了TTML歌词转换和动画页处理逻辑
  - 增强了TTML到LYS/LRC的转换算法，更好地处理背景人声和对唱标记
  - 改进了LYS/LRC到TTML的转换，支持翻译内容的合并
  - 优化了歌词动画页的处理逻辑，提高渲染性能
- 添加了LYS/LRC转TTML功能并支持AMLL规则编写
  - 新增临时TTML转换接口(`/convert_to_ttml_temp`)专用于AMLL规则编写
  - 支持Apple风格的TTML格式输出
  - 增强了对背景人声(ttm:role="x-bg")和对唱(ttm:agent="v2")的支持
- 新增AI驱动的歌词翻译功能
  - 集成DeepSeek API实现高质量歌词翻译
  - 支持自定义系统提示词控制翻译风格
  - 实现流式响应实现实时翻译显示
  - 自动对齐时间戳与原始歌词
- 新增歌词导出功能
  - 支持将歌词导出为CSV格式
  - 提供逐字时间轴导出功能
- 增强了安全特性
  - 完善了设备认证系统，支持受信任设备管理
  - 增加了安全配置开关，便于不同环境部署

### 技术改进
- 优化了歌词解析算法，提高处理性能
- 改进了文件备份机制，增强数据安全性
- 更新了项目配置和文档内容
- 优化了MD格式文档的显示效果

### 修复问题
- 修复了TTML转换过程中的一些边界情况处理
- 解决了歌词动画页在特定场景下的渲染问题
- 修复了文件上传和保存过程中的权限问题
- 改进了错误处理和日志记录机制

## [v1.4.0] - 2025-09-15

### 新增功能
- 实现了TTML格式的完整支持
  - 新增TTML到LYS/LRC的转换功能
  - 新增LYS/LRC到TTML的转换功能
  - 支持背景人声和对唱歌词处理
- 增加了AMLL集成支持
  - 实现了WebSocket服务器(端口11444)与AMLL对接
  - 支持Server-Sent Events实现实时歌词更新
- 添加了歌词动画效果
  - 实现了智能计算的歌词消失时间算法
  - 新增多种动画样式支持

### 技术改进
- 重构了歌词解析模块，提高代码可维护性
- 优化了文件上传和处理流程
- 改进了JSON文件管理界面

## [v1.3.0] - 2025-08-20

### 新增功能
- 实现了LYS格式的完整支持
  - 支持音节级时间标记解析
  - 支持背景人声标记([6][7][8])处理
  - 支持对唱标记([2][5])处理
- 增加了LRC格式增强支持
  - 支持时间偏移(offset)处理
  - 增强了元数据解析能力
- 添加了文件版本管理和自动备份功能
  - 自动维护最多7个版本的文件备份
  - 支持一键恢复历史版本

### 技术改进
- 优化了Flask应用架构，支持打包部署
- 改进了静态文件服务配置
- 增强了错误处理和日志记录

## [v1.2.0] - 2025-07-10

### 新增功能
- 实现了基本的歌词文件管理
  - 支持JSON歌词文件的创建、编辑、删除
  - 提供文件上传功能
- 增加了安全认证机制
  - 实现了基于设备的认证系统
  - 添加了密码保护功能
- 添加了基础的歌词显示功能
  - 实现了歌词动画页面
  - 支持多种显示样式

### 技术改进
- 重构了项目目录结构
- 优化了模板渲染性能
- 改进了响应式设计

## [v1.1.0] - 2025-06-01

### 新增功能
- 初始化项目基础框架
  - 基于Flask的Web应用架构
  - 实现了基础的路由和页面模板
- 实现了基础的文件操作功能
  - 支持歌曲文件、图片文件上传
  - 实现了基本的文件管理界面

### 技术特性
- 采用Flask作为Web框架
- 使用Waitress作为生产环境服务器
- 支持开发和生产环境部署